
/* /static/js/libs/String.js */
if(!String.prototype.isBoolean){String.prototype.isBoolean=function(){var lower=this.toLowerCase();if(lower=='true'||lower=='false')return true;}}
if(!String.prototype.toBoolean){String.prototype.toBoolean=function(){if(!this.isBoolean())throw new Error("String: '"+this+"' is not boolean for conversion.");var lower=this.toLowerCase();return lower=='true'?true:false;}}
if(!String.prototype.isNumeric){String.prototype.isNumeric=function(){return this!==''&&!isNaN(this);}}
if(!String.prototype.isInteger){String.prototype.isInteger=function(){var r=false;if(this.isNumeric()){if(/^([0-9]*)$/g.test(this.replace(/\s/g,'')))r=true;}
return r;}}
if(!String.prototype.isFloat){String.prototype.isFloat=function(){var r=false;if(this.isNumeric()){if(/^([0-9\.]*)$/g.test(this.replace(/\s/g,'').replace(/,/g,'.')))r=true;}
return r;}}
if(!String.prototype.toInteger){String.prototype.toInteger=function(radix){if(!this.isInteger())throw new Error("String: '"+this+"' is not numeric for integer conversion.");radix=radix||10;return parseInt(this,radix);}}
if(!String.prototype.toFloat){String.prototype.toFloat=function(){if(!this.isFloat())throw new Error("String: '"+this+"' is not numeric for float conversion.");return parseFloat(this);}}
if(!String.prototype.upperCaseFirst){String.prototype.upperCaseFirst=function(){var f=this.charAt(0).toUpperCase();return f+this.substr(1);}}
if(!String.prototype.lowerCaseFirst){String.prototype.lowerCaseFirst=function(){var f=this.charAt(0).toLowerCase();return f+this.substr(1);}}
String.prototype.trim=function(charlist){var str=this,whitespace,l=0,i=0;if(!charlist){whitespace=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";}else{charlist+='';whitespace=charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,'$1');}
l=str.length;for(i=0;i<l;i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);break;}}
l=str.length;for(i=l-1;i>=0;i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);break;}}
return whitespace.indexOf(str.charAt(0))===-1?str:'';}
String.prototype.trimLeft=function(charlist){var str=this,whitespace,l=0,i=0;if(!charlist){whitespace=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";}else{charlist+='';whitespace=charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,'$1');}
l=str.length;for(i=0;i<l;i++){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(i);break;}}
return whitespace.indexOf(str.charAt(0))===-1?str:'';}
String.prototype.trimRight=function(charlist){var str=this,whitespace,l=0,i=0;if(!charlist){whitespace=" \n\r\t\f\x0b\xa0\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u200b\u2028\u2029\u3000";}else{charlist+='';whitespace=charlist.replace(/([\[\]\(\)\.\?\/\*\{\}\+\$\^\:])/g,'$1');}
l=str.length;for(i=l-1;i>=0;i--){if(whitespace.indexOf(str.charAt(i))===-1){str=str.substring(0,i+1);break;}}
return whitespace.indexOf(str.charAt(0))===-1?str:'';}
if(!String.prototype.stripTags){String.prototype.stripTags=function(allowed_tags){var str=this;var key='',allowed=false;var matches=[];var allowed_array=[];var allowed_tag='';var i=0;var k='';var html='';var replacer=function(search,replace,str){return str.split(search).join(replace);};if(allowed_tags){allowed_array=allowed_tags.match(/([a-zA-Z0-9]+)/gi);}
str+='';matches=str.match(/(<\/?[\S][^>]*>)/gi);for(key in matches){if(isNaN(key)){continue;}
html=matches[key].toString();allowed=false;for(k in allowed_array){allowed_tag=allowed_array[k];i=-1;if(i!=0){i=html.toLowerCase().indexOf('<'+allowed_tag+'>');}
if(i!=0){i=html.toLowerCase().indexOf('<'+allowed_tag+' ');}
if(i!=0){i=html.toLowerCase().indexOf('</'+allowed_tag);}
if(i==0){allowed=true;break;}}
if(!allowed){str=replacer(html,"",str);}}
return str;}}
if(!String.prototype.utf8encode){String.prototype.utf8encode=function(){var string=this;var utftext="";var start,end;var stringl=0;start=end=0;stringl=string.length;for(var n=0;n<stringl;n++){var c1=string.charCodeAt(n);var enc=null;if(c1<128){end++;}else if(c1>127&&c1<2048){enc=String.fromCharCode((c1>>6)|192)+String.fromCharCode((c1&63)|128);}else{enc=String.fromCharCode((c1>>12)|224)+String.fromCharCode(((c1>>6)&63)|128)+String.fromCharCode((c1&63)|128);}
if(enc!==null){if(end>start){utftext+=string.substring(start,end);}
utftext+=enc;start=end=n+1;}}
if(end>start){utftext+=string.substring(start,string.length);}
return utftext;}}
if(!String.prototype.md5){String.prototype.md5=function(){var str=this,xl;var rotateLeft=function(lValue,iShiftBits){return(lValue<<iShiftBits)|(lValue>>>(32-iShiftBits));};var addUnsigned=function(lX,lY){var lX4,lY4,lX8,lY8,lResult;lX8=(lX&0x80000000);lY8=(lY&0x80000000);lX4=(lX&0x40000000);lY4=(lY&0x40000000);lResult=(lX&0x3FFFFFFF)+(lY&0x3FFFFFFF);if(lX4&lY4){return(lResult^0x80000000^lX8^lY8);}
if(lX4|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8);}else{return(lResult^0x40000000^lX8^lY8);}}else{return(lResult^lX8^lY8);}};var _F=function(x,y,z){return(x&y)|((~x)&z);};var _G=function(x,y,z){return(x&z)|(y&(~z));};var _H=function(x,y,z){return(x^y^z);};var _I=function(x,y,z){return(y^(x|(~z)));};var _FF=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(_F(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var _GG=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(_G(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var _HH=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(_H(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var _II=function(a,b,c,d,x,s,ac){a=addUnsigned(a,addUnsigned(addUnsigned(_I(b,c,d),x),ac));return addUnsigned(rotateLeft(a,s),b);};var convertToWordArray=function(str){var lWordCount;var lMessageLength=str.length;var lNumberOfWords_temp1=lMessageLength+8;var lNumberOfWords_temp2=(lNumberOfWords_temp1-(lNumberOfWords_temp1%64))/64;var lNumberOfWords=(lNumberOfWords_temp2+1)*16;var lWordArray=new Array(lNumberOfWords-1);var lBytePosition=0;var lByteCount=0;while(lByteCount<lMessageLength){lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=(lWordArray[lWordCount]|(str.charCodeAt(lByteCount)<<lBytePosition));lByteCount++;}
lWordCount=(lByteCount-(lByteCount%4))/4;lBytePosition=(lByteCount%4)*8;lWordArray[lWordCount]=lWordArray[lWordCount]|(0x80<<lBytePosition);lWordArray[lNumberOfWords-2]=lMessageLength<<3;lWordArray[lNumberOfWords-1]=lMessageLength>>>29;return lWordArray;};var wordToHex=function(lValue){var wordToHexValue="",wordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(lValue>>>(lCount*8))&255;wordToHexValue_temp="0"+lByte.toString(16);wordToHexValue=wordToHexValue+wordToHexValue_temp.substr(wordToHexValue_temp.length-2,2);}
return wordToHexValue;};var x=[],k,AA,BB,CC,DD,a,b,c,d,S11=7,S12=12,S13=17,S14=22,S21=5,S22=9,S23=14,S24=20,S31=4,S32=11,S33=16,S34=23,S41=6,S42=10,S43=15,S44=21;str=str.utf8encode();x=convertToWordArray(str);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;xl=x.length;for(k=0;k<xl;k+=16){AA=a;BB=b;CC=c;DD=d;a=_FF(a,b,c,d,x[k+0],S11,0xD76AA478);d=_FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=_FF(c,d,a,b,x[k+2],S13,0x242070DB);b=_FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=_FF(a,b,c,d,x[k+4],S11,0xF57C0FAF);d=_FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=_FF(c,d,a,b,x[k+6],S13,0xA8304613);b=_FF(b,c,d,a,x[k+7],S14,0xFD469501);a=_FF(a,b,c,d,x[k+8],S11,0x698098D8);d=_FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=_FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=_FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=_FF(a,b,c,d,x[k+12],S11,0x6B901122);d=_FF(d,a,b,c,x[k+13],S12,0xFD987193);c=_FF(c,d,a,b,x[k+14],S13,0xA679438E);b=_FF(b,c,d,a,x[k+15],S14,0x49B40821);a=_GG(a,b,c,d,x[k+1],S21,0xF61E2562);d=_GG(d,a,b,c,x[k+6],S22,0xC040B340);c=_GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=_GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=_GG(a,b,c,d,x[k+5],S21,0xD62F105D);d=_GG(d,a,b,c,x[k+10],S22,0x2441453);c=_GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=_GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=_GG(a,b,c,d,x[k+9],S21,0x21E1CDE6);d=_GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=_GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=_GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=_GG(a,b,c,d,x[k+13],S21,0xA9E3E905);d=_GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=_GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=_GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=_HH(a,b,c,d,x[k+5],S31,0xFFFA3942);d=_HH(d,a,b,c,x[k+8],S32,0x8771F681);c=_HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=_HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=_HH(a,b,c,d,x[k+1],S31,0xA4BEEA44);d=_HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=_HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=_HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=_HH(a,b,c,d,x[k+13],S31,0x289B7EC6);d=_HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=_HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=_HH(b,c,d,a,x[k+6],S34,0x4881D05);a=_HH(a,b,c,d,x[k+9],S31,0xD9D4D039);d=_HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=_HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=_HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=_II(a,b,c,d,x[k+0],S41,0xF4292244);d=_II(d,a,b,c,x[k+7],S42,0x432AFF97);c=_II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=_II(b,c,d,a,x[k+5],S44,0xFC93A039);a=_II(a,b,c,d,x[k+12],S41,0x655B59C3);d=_II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=_II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=_II(b,c,d,a,x[k+1],S44,0x85845DD1);a=_II(a,b,c,d,x[k+8],S41,0x6FA87E4F);d=_II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=_II(c,d,a,b,x[k+6],S43,0xA3014314);b=_II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=_II(a,b,c,d,x[k+4],S41,0xF7537E82);d=_II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=_II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=_II(b,c,d,a,x[k+9],S44,0xEB86D391);a=addUnsigned(a,AA);b=addUnsigned(b,BB);c=addUnsigned(c,CC);d=addUnsigned(d,DD);}
var temp=wordToHex(a)+wordToHex(b)+wordToHex(c)+wordToHex(d);return temp.toLowerCase();}}
if(!String.prototype.nl2br){String.prototype.nl2br=function(is_xhtml){var breakTag=(is_xhtml||typeof is_xhtml==='undefined')?'<br />':'<br>';return this.replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,'$1'+breakTag+'$2');}}
if(!String.format){String.format=function(){var args=[].slice.apply(arguments),str=args.shift();for(var i=0,l=args.length;i<l;i+=1){str=str.replace(new RegExp('\\{'+i+'\\}','g'),args[i]);}
return str;}}
if(!String.prototype.format){String.prototype.format=function(){return String.format.apply(this.toString(),[].slice.apply(arguments));}}

/* /static/js/libs/Date.js */
if(!Date.unixTimestamp){Date.unixTimestamp=function(){return Math.round(+new Date/1000);}}

/* /static/js/libs/Array.js */
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(searchElement,fromIndex){var k;if(this==null)throw new TypeError('"this" is null or not defined');var o=Object(this);var len=o.length>>>0;if(len===0)return-1;var n=+fromIndex||0;if(Math.abs(n)===Infinity)n=0;if(n>=len)return-1;k=Math.max(n>=0?n:len-Math.abs(n),0);while(k<len){if(k in o&&o[k]===searchElement)return k;k++;}
return-1;};}

/* /static/js/libs/Object.js */
(function(){if(!Object.clone){var cloner={primitives:{'Boolean':1,'Null':1,'Undefined':1,'Number':1,'String':1,'Symbol':1},customCloners:{'Function':'cloneFunction','Date':'cloneDate','RegExp':'cloneRegExp'},clone:function(source){var type=cloner.getType(source);if(type in cloner.primitives){return source;}else if(type in cloner.customCloners){return cloner.customCloners[type](source);}else{return cloner.cloneArrayOrObject(source,type);}},getType:function(source){var type=Object.prototype.toString.apply(source);return type.substr(8,type.length-9);},cloneFunction:function(source){var name=source.prototype.constructor.name,fnSrc=source.toString(),argsBegin=fnSrc.indexOf('('),argsEnd=fnSrc.indexOf('{'),argsStr=fnSrc.substr(argsBegin,argsEnd-argsBegin),bodyPart=fnSrc.substr(argsEnd);return new Function('return function '+name+argsStr+bodyPart)();},cloneDate:function(source){var r=new Date();r.setTime(source.getTime());return r;},cloneRegExp:function(source){return new RegExp(source.source,source.flags);},cloneArrayOrObject:function(source,type){if(type.substr(type.length-5)=='Array'){return source.slice(0);}else{return Object.assign(Object.create(source.__proto),source);}}};Object.clone=cloner.clone;}})();

/* /static/js/libs/Tools.js */
Class.Define('Tools',{Static:{Isset:(function(){var test=function(val){return(typeof(val)!='undefined'&&val!==null)?true:false;};var isset=function(object,indexesStr){var result=true;var arr=[object];var iterator=0;if(typeof(indexesStr)=='string'){var indexes=indexesStr.split('.');}
if(test(object)){if(typeof(indexesStr)!='string'){return test(object[indexesStr]);}
for(var i=0,l=indexes.length;i<l;i+=1){arr[iterator+1]=arr[iterator][indexes[i]];if(!test(arr[iterator+1])){result=false;break;}
iterator+=1;}}else{result=false;};return result;};return isset;})(),TypeOf:function(o){var r=Object.prototype.toString.apply(o);return r.substr(8,r.length-9);},JsonAttr:function(elmId){var elm=document.getElementById(elmId),result={success:false,data:null,message:''};if(elm){result=this.GetEvaluated(decodeURIComponent(elm.value).replace(/%25/g,'%'));}else{result.message='[Tools.JsonAttr] Element id: "'+elmId+'" not found.';}
return result;},GetEvaluated:function(val){var result={success:false,data:val,message:''};if(String(val).length>0){try{result.success=true;result.data=(new Function('return ('+val+');'))();}catch(e){result.message='[Tools.JsonAttr] '+e.message;}}else{result.message='[Tools.JsonAttr] No data from: '+arguments.callee.caller+'  from: '+arguments.callee.caller.caller;}
if(!result.success){log(result);}
return result;},}});

/* /static/js/front/statistics/libs/Config.js */
Class.Define('App.libs.Config',{Static:{ContainerId:'statistics-questions-results',ConfigurationId:'statistics-questions-configuration',LoadingId:'statistics-questions-loading',FilterFormId:'',BasePath:'',Questions:[],StatisticsUrl:'',Translations:{},_initialized:false,_success:false,Init:function(){if(this._initialized)return this._success;this._initBasePath();this._initJsonAttrConfiguration();this._initialized=true;return this._success;},_initBasePath:function(){var
baseElms=document.getElementsByTagName('base'),basePath='/';if(baseElms.length>0){basePath=baseElms[0].getAttribute('href');}
this.BasePath=basePath;},_initJsonAttrConfiguration:function(){var jsonAttr=Tools.JsonAttr(this.ConfigurationId);if(jsonAttr.success){this._success=true;this.Questions=jsonAttr.data.Questions;this.StatisticsUrl=jsonAttr.data.StatisticsUrl;this.FilterFormId=jsonAttr.data.FilterFormId;this.Translations=jsonAttr.data.Translations;}}}});

/* /static/js/front/statistics/libs/Helpers.js */
Ext.define('App.libs.Helpers',{config:{loadingImg:null,logoImg:null,xhrActive:0,},constructor:function(){var adminLogoCont=Ext.get("admin-logo-cont");this.config.logoImg=adminLogoCont.child('.admin-logo');this.config.loadingImg=adminLogoCont.child('.ajax-loading');},initAjaxCommonStates:function(){Ext.Ajax.setDisableCaching(true);Ext.Ajax.setTimeout(900000);Ext.Ajax.setMethod('GET');Ext.Ajax.on('requestexception',function(conn,response,options){console.log('xhr request failed');this._showNotification(t('Error'),t('Error general'),'error',this._formatErrorFromAjaxResponseAndOptions(response,options));this.config.xhrActive-=1;if(this.config.xhrActive<1){this._finishLoading();}}.bind(this));Ext.Ajax.on('beforerequest',function(){if(this.config.xhrActive<1){this._startLoading();}
this.config.xhrActive+=1;}.bind(this));Ext.Ajax.on('requestcomplete',function(conn,response,options){this.config.xhrActive-=1;if(this.config.xhrActive<1){this._finishLoading();}
if(typeof response.getResponseHeader=="function"){if(response.getResponseHeader("X-Pimcore-Auth")=="required"){this._showNotification(t('Session error'),t('Session error text'),'error',this._formatErrorFromAjaxResponseAndOptions(response,options));}}}.bind(this));this.config.loadingImg.addCls('hidden');return this;},initWindowBeforeUnload:function(){if(!Settings.alertOnAppClose)return;window.onbeforeunload=function(){var mainTabs=Ext.getCmp('main-tabs');if(mainTabs&&mainTabs.items.getCount()>0){return t("Do you really want to close administration?");}}.bind(this);return this;},_startLoading:function(){this.config.logoImg.addCls('hidden');this.config.loadingImg.removeCls('hidden');},_finishLoading:function(){this.config.loadingImg.addCls('hidden');this.config.logoImg.removeCls('hidden');},_formatErrorFromAjaxResponseAndOptions:function(response,options)
{var errorMessage='';try{errorMessage="Status: "+response.status+" | "+response.statusText+"\n";errorMessage+="URL: "+options.url+"\n";if(options["params"]){errorMessage+="Params:\n";Ext.iterate(options.params,function(key,value){errorMessage+=("-> "+key+": "+value+"\n");});}
if(options["method"]){errorMessage+="Method: "+options.method+"\n";}
errorMessage+="Message: \n"+response.responseText;}catch(e){errorMessage+="\n\n";errorMessage=response.responseText;}
return errorMessage;},_showNotification:function(title,text,type,errorText,hideDelay){if(type=="error"){if(errorText!=null&&errorText!=undefined){text=text+'<br /><hr /><br />'+'<pre style="font-size:11px;word-wrap: break-word;">'
+String(errorText).stripTags()+"</pre>";}
var errWin=new Ext.Window({modal:true,iconCls:"icon_notification_error",title:title,width:700,height:500,html:text,autoScroll:true,bodyStyle:"padding: 10px; background:#fff;",buttonAlign:"center",shadow:false,closable:false,buttons:[{text:"OK",handler:function(){errWin.close();}}]});errWin.show();}else{var notification=Ext.create('Ext.window.Toast',{iconCls:'icon_notification_'+type,title:title,html:text,autoShow:true});notification.show(document);}}});

/* /static/js/front/statistics/libs/Translator.js */
Class.Define('App.libs.Translator',{Static:{_instance:null,Translations:{},SetUsedKey:function(key){if(!this._instance){this._instance=Class.Create(this.Fullname);}
this._instance._setUsedKey(key);}},Constructor:function(){this.usage=[];this.timeout=15;this.id=0;},_setUsedKey:function(key){var item={};item[key]=Date.unixTimestamp();this.usage.push(item);if(!this.id)this._timeoutSync();},_timeoutSync:function(){this.id=setTimeout(function(){this._sync();}.bind(this),this.timeout*1000);},_sync:function(){if(this.usage.length>0){this._timeoutSync();}else{this._timeoutSync();}}});var t=function(key){var translator=App.libs.Translator;if(typeof(translator.Translations[key])!='undefined'){translator.SetUsedKey(key);return translator.Translations[key];}else{return key;}}

/* /static/js/front/statistics/controller/Base.js */
Ext.define('App.controller.Base',{extend:'Ext.app.Controller',$tabs:null,$form:null,$submit:null,_loading:null,_idQuestionnaire:-1,_questions:[],_formSubmitMethod:'',_statisticsUrl:'',_currentQuestion:0,_requestInProcess:false,_requestQueue:[],_hashRegExpBody:'^{0}\-([0-9]*)$',_hashRegExp:null,_locationHashTmpl:'{0}-{1}',init:function(){this.callParent(arguments);this._startupChechIfAppIsNotInIframe();},onLaunch:function(){this._initBaseProperties();this._parseLocationHashTabIndex();this._initHtmlFormElmsAndEvents();this._initTabsView();this._initWindowOnHashChangeEvent();this.callParent(arguments);},_initBaseProperties:function(){var cfg=App.libs.Config;this._questions=cfg.Questions;this._statisticsUrl=cfg.StatisticsUrl;this._locationHashTmpl=String.format(this._locationHashTmpl,t('question-tab'),'{0}');this._hashRegExpBody=String.format(this._hashRegExpBody,t('question-tab'));this._hashRegExp=new RegExp(this._hashRegExpBody,'g');},_initTabsView:function(){this.$tabs=Ext.create('App.view.Layout',{renderTo:App.libs.Config.ContainerId});for(var i=0,l=this._questions.length;i<l;i+=1){this._addTab(i);}
if(this._currentQuestion>0){this.$tabs.setActiveTab(this._currentQuestion);}else{this._tabOnBoxReadyHandler(0,this.$tabs.items.items[0]);}},_addTab:function(questionIndex){var question=this._questions[questionIndex];var tab=Ext.create('App.view.Tab',{question:question,index:questionIndex,questionsCount:this._questions.length,listeners:{show:function(tab,eOpts){if(!tab.initialized)this._tabOnBoxReadyHandler(questionIndex,tab);this._currentQuestion=questionIndex;location.hash=String.format(this._locationHashTmpl,questionIndex+1);}.bind(this)}});this.$tabs.add(tab);},_initHtmlFormElmsAndEvents:function(){var config=App.libs.Config,form=document.getElementById(config.FilterFormId),input={};for(var i=0,l=form.length;i<l;i+=1){input=form[i];if(input.type=='range'||input.type=='checkbox'){Ext.get(input).on('change',this._onSubmitHandler.bind(this));}else if(input.type=='submit'){this.$submit=Ext.get(input);}}
this.$form=Ext.get(form);this.$form.on('submit',this._onSubmitHandler.bind(this));this._formSubmitMethod=this.$form.dom.getAttribute('method');this.$loading=Ext.get(config.LoadingId);},_tabOnBoxReadyHandler:function(questionIndex,tab){tab.initialized=true;this._currentQuestion=questionIndex;this._deelay(function(){this._loadQuestionStatistics(questionIndex);});},_onSubmitHandler:function(e,form){e.preventDefault();this._deelay(function(){this._loadQuestionStatistics(this._currentQuestion);});},_loadQuestionStatistics:function(questionIndex){var lastIndex=0,question={};this._requestQueue.push(questionIndex);if(!this._requestInProcess){this._requestInProcess=true;this.$loading.removeCls('visibility-hidden');this.$submit.addCls('disabled');lastIndex=this._requestQueue[this._requestQueue.length-1];this._requestQueue=[];question=this._questions[lastIndex];Ext.Ajax.request({url:this._statisticsUrl.replace('__ID_QUESTION__',question.Id),method:this._formSubmitMethod,params:Ext.dom.Element.serializeForm(this.$form.dom),success:function(xhr,conn,options,eOpts){this._deelay(function(){this._onQuestionStatisticsLoadedHandler(xhr,lastIndex);this.$loading.addCls('visibility-hidden');this.$submit.removeCls('disabled');this._requestInProcess=false;if(this._requestQueue.length>0){lastIndex=this._requestQueue[this._requestQueue.length-1];this._requestQueue=[];this._loadQuestionStatistics(lastIndex);}});}.bind(this)});}},_onQuestionStatisticsLoadedHandler:function(xhr,questionIndex){var rawResult=Tools.GetEvaluated(xhr.responseText),result={};if(rawResult.success){result=rawResult.data;if(result.success){this._setUpQuestionTab(questionIndex,result.data);}}},_setUpQuestionTab:function(questionIndex,statistics){var question=this._questions[questionIndex],questionTypeCamelCase=question.Type.replace(/-([a-z])/g,function(m,w){return w.toUpperCase();}),ctrlClass='App.controller.tabs.'+questionTypeCamelCase.upperCaseFirst(),currentTab=this.$tabs.items.getAt(questionIndex),tabCtrl=Ext.create(ctrlClass,{question:question,statistics:statistics});tabContentView=Ext.create('App.view.tabs.Content',{$$controller:tabCtrl,question:question,statistics:statistics});tabCtrl.$$view=tabContentView;tabCtrl.init();this.$tabs.setActiveTab(currentTab);if(currentTab.items.length>0)currentTab.removeAll(true);currentTab.add(tabContentView);tabCtrl.onLaunch();},_startupChechIfAppIsNotInIframe:function(){if(window!==window.top){window.top.location.href=location.href;return false;}
return true;},_parseLocationHashTabIndex:function(){var hash=location.hash.replace('#',''),indexStr='',indexInt=0;if(this._hashRegExp.test(hash)){indexStr=hash.replace(this._hashRegExp,'$1');indexInt=parseInt(indexStr,10);indexInt-=1;this._currentQuestion=indexInt;}},_initWindowOnHashChangeEvent:function(){if(Ext.feature.has.History){window.addEventListener('hashchange',Ext.bind(this._onHashChangeHandler,this));}else{setInterval(Ext.bind(this._onHashChangeHandler,this),200);}},_onHashChangeHandler:function(){var tab;this._parseLocationHashTabIndex();tab=this.$tabs.items.items[this._currentQuestion];if(!tab.initialized){this._tabOnBoxReadyHandler(this._currentQuestion,tab);}else{this.$tabs.setActiveTab(tab);}},_deelay:function(cb){setTimeout(cb.bind(this),1);}});

/* /static/js/front/statistics/controller/Tab.js */
Ext.define('App.controller.Tab',{extend:'Ext.app.Controller',requires:[],statics:{TEXT_QUANTITY_TYPES:{GRAPH:{MAX_CHARS:15,MAX_ROWS:8},GRID:{MAX_CHARS:Infinity,MAX_ROWS:Infinity,ITEMS_PER_SCREEN:20}}},_question:{},_statistics:{},_textsQuantityType:'',constructor:function(config){this._question=config.question;this._statistics=config.statistics;this.callParent(arguments);},init:function(){this.callParent(arguments);},onLaunch:function(){this.callParent(arguments);},deelay:function(cb){setTimeout(cb.bind(this),1);},renderSummaryIfAnyData:function(headingText){var headingText=headingText||this._statistics.Translations.Summary,data=this._statistics.Summary;if(Tools.TypeOf(data)=='Array'&&data.length>0){this.$$view.addGraphHeading(headingText);this.$$view.content.add({xtype:'container',html:this.$$view.completeSummaryTableCode(data)});}},renderTextsSummaryGraphOrGrid:function(data,graphHeadingText){this._textsQuantityType=this.determinateTextsQuantityType(data);if(this._textsQuantityType=='GRAPH'){this._renderTextsGraphIfAnyData(data,graphHeadingText);}else if(this._textsQuantityType=='GRID'){this._renderTextsGridIfAnyData(data,graphHeadingText);}},renderInvolvedGraphIfAnyData:function(){var data=this._statistics.Involved,store={},chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){data=this._statistics.Involved;store=Ext.create('App.store.charts.SingleDimension',{data:data});chart=Ext.create('App.view.charts.Pie',{store:store,theme:'BlueRed'});this.$$view.addGraphHeading(this._statistics.Translations.Involved);this.$$view.content.add(chart);}},renderBooleanGraph:function(data){var totalPercentCnt=0,store,chart;if(Tools.TypeOf(data)=='Array'&&data.length>0){for(var i=0,l=data.length;i<l;i+=1){data[i].Label=data[i].Label.replace(/ /g,'\n');}
store=Ext.create('App.store.charts.SingleDimension',{data:data});chart=Ext.create('App.view.charts.Pie',{store:store,theme:'GreenRedGray'});this.$$view.content.add(chart);}},truncateDataTextField:function(data,truncateField,truncateLength,originalField){var before='',after='',lastSpaceIndex=0;for(var i=0,l=data.length;i<l;i+=1){before=String(data[i][truncateField]).replace(/\n/g,' ');after=before+' ';lastSpaceIndex=after.lastIndexOf(' ',truncateLength);if(lastSpaceIndex===-1)continue;after=after.substr(0,lastSpaceIndex);data[i][truncateField]=before!=after?after+'...':before;data[i][originalField]=before;}},determinateTextsQuantityType:function(data,textFieldName){var textFieldName=textFieldName||'Value',textQuantityTypes=App.controller.Tab.TEXT_QUANTITY_TYPES,textQuantityType={},dataRowsCount=data.length,dataItemTextLength=0,dataMaxChars=0,result='';for(var i=0,l=data.length;i<l;i+=1){dataItemTextLength=String(data[i][textFieldName]).length;if(dataItemTextLength>dataMaxChars)dataMaxChars=dataItemTextLength;}
textQuantityType=textQuantityTypes.GRAPH;if(dataMaxChars<textQuantityType.MAX_CHARS&&dataRowsCount<textQuantityType.MAX_ROWS){result='GRAPH';}else{result='GRID';}
return result;},_renderTextsGraphIfAnyData:function(data,graphHeadingText){var store=Ext.create('App.store.charts.SingleDimension',{data:data}),countsDisplaying=data.length>0&&typeof(data[0].Count)=='number',verticalColumn=countsDisplaying?'Count':'Percentage',verticalTitle=this._statistics.Translations[countsDisplaying?'Respondents Counts':'Respondents Percentages'],verticalLegendTmpl=countsDisplaying?'0.0':'0 %',graphMaximum=store.max(verticalColumn),majorTickSteps=countsDisplaying?Math.round(Math.sqrt(graphMaximum)):10,chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'YellowCustom',axes:[{maximum:store.max(verticalColumn),fields:verticalColumn,title:verticalTitle,majorTickSteps:majorTickSteps,renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),verticalLegendTmpl);}},{fields:'Value',title:this._statistics.Translations['Answered Texts']}],series:[{yField:verticalColumn,label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){var code='';if(countsDisplaying){code=record.get('Value')+': '
+String(record.get('Count'))+' ('
+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{code=record.get('Value')+': '
+Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(code);}},renderer:function(sprite,config,stores,index){var colors=Ext.chart.theme.GreenRedGray.Colors,record=stores.store.getAt(index),recordData=record.data;if(typeof(recordData.Correct)=='boolean'){if(recordData.Correct){return{fillStyle:colors[0]};}else{return{fillStyle:colors[1]};}}
return config;}}]});this.$$view.addGraphHeading(graphHeadingText);this.$$view.content.add(chart);}else{this.$$view.addNoDataMsg();}},_renderTextsGridIfAnyData:function(data,graphHeadingText){var itemsPerScreen=App.controller.Tab.TEXT_QUANTITY_TYPES.GRID.ITEMS_PER_SCREEN,store=Ext.create('App.store.charts.SingleDimension',{data:data,pageSize:itemsPerScreen}),translations=this._statistics.Translations,countsDisplaying=Tools.TypeOf(data)=='Array'&&data.length>0&&typeof(data[0].Count)=='number',gridColumnsConfig=[{text:translations['Answered Texts'],flex:1,dataIndex:'Value',sortable:true,align:'left'},{text:translations['Counts'],width:90,dataIndex:'Count',sortable:true,align:'right'},{text:translations['Percentages'],width:100,dataIndex:'Percentage',sortable:true,align:'right',renderer:function(value){return value+' %';}}],gridConfig={},grid={};if(Tools.TypeOf(data)=='Array'&&data.length>0){if(!countsDisplaying){gridColumnsConfig=[gridColumnsConfig[0],gridColumnsConfig[2]];}else if(data.length>0&&typeof(data[0].Correct)=='boolean'){gridColumnsConfig.push({text:translations['Correct'],width:100,dataIndex:'Correct',sortable:true,align:'right',renderer:function(value){return value?translations['Yes']:translations['No'];}});}
gridConfig={bufferedRenderer:true,store:store,columns:gridColumnsConfig,forceFit:true,margin:'0 25 25 25',split:true,region:'center'};if(data.length>itemsPerScreen){gridConfig.height=((itemsPerScreen+1)*34);};grid=Ext.create('Ext.grid.Panel',gridConfig);this.$$view.addGraphHeading(graphHeadingText);this.$$view.content.add(grid);}else{this.$$view.addNoDataMsg();}}});

/* /static/js/front/statistics/controller/tabs/Connections.js */
Ext.define('App.controller.tabs.Connections',{extend:'App.controller.Tab',requires:[],init:function(){this.callParent(arguments);},onLaunch:function(){this.deelay(function(){this.renderSummaryIfAnyData();this.deelay(function(){this._renderPresentedOptionsOrAnswersCountsGraphIfAnyData({dataSourceKey:'PresentedOptionsCounts',height:400,translationKeyVerticalTitleCount:'Answers counts, where option was presented',translationKeyVerticalTitlePercentage:'Answers percentages, where option was presented',translationKeyTooltipPresentedValue:'Question Option',translationKeyBottomAxeTitle:'Question Options'});this.deelay(function(){this._renderPresentedOptionsOrAnswersCountsGraphIfAnyData({dataSourceKey:'PresentedAnswersCounts',height:500,translationKeyVerticalTitleCount:'Any presented option count',translationKeyVerticalTitlePercentage:'Any presented option percentage',translationKeyTooltipPresentedValue:'Question Answer',translationKeyBottomAxeTitle:'Question Answers'});this.deelay(function(){this._renderConnectionsCorrectnessGraph();this.deelay(function(){this._renderMostOfftenConnectionsGraph();this.deelay(function(){this._renderPeopleCorrectnessGraph();this.deelay(function(){this._renderPersonsAnswersCountsGraph();this.deelay(function(){this._renderCorrectAnswersGraphIfAnyData();this.deelay(function(){this.renderInvolvedGraphIfAnyData();});});});});});});});});});this.callParent(arguments);},_renderPresentedOptionsOrAnswersCountsGraphIfAnyData:function(cfg){var data=this._statistics[cfg.dataSourceKey],countsDisplaying=data.length>0&&typeof(data[0].Count)=='number',verticalColumn=countsDisplaying?'Count':'Percentage',translations=this._statistics.Translations,verticalTitle=translations[countsDisplaying?cfg.translationKeyVerticalTitleCount:cfg.translationKeyVerticalTitlePercentage],presentedValue=translations[cfg.translationKeyTooltipPresentedValue],verticalLegendTmpl=countsDisplaying?'0':'0 %',graphMaximum=0,majorTickSteps=0,store={},chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){this.truncateDataTextField(data,'Value',30,'OriginalValue');store=Ext.create('App.store.charts.SingleDimension',{data:data});graphMaximum=store.max(verticalColumn);majorTickSteps=countsDisplaying?graphMaximum:Math.round(graphMaximum/10);chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'YellowCustom',height:cfg.height,axes:[{maximum:store.max(verticalColumn),fields:verticalColumn,title:{fontSize:'13px',text:verticalTitle},majorTickSteps:majorTickSteps,renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),verticalLegendTmpl);}},{fields:'Value',title:translations[cfg.translationKeyBottomAxeTitle],renderer:function(axis,labelValue,layoutContext,lastLabel){return labelValue;}}],series:[{yField:verticalColumn,label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){var codeParts=[presentedValue+": "+record.get('OriginalValue'),verticalTitle+': '];if(countsDisplaying){codeParts[1]+=String(record.get('Count'))+' ('+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{codeParts[1]+=Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(codeParts.join("<br />"));}},renderer:function(sprite,config,data,index){}}]});this.$$view.addGraphHeading(this._statistics.Translations[cfg.dataSourceKey]);this.$$view.content.add(chart);}else{this.$$view.addNoDataMsg();}},_renderMostOfftenConnectionsGraph:function(){var data=this._statistics.MostOfftenConnections,countsDisplaying=(data.length>0&&typeof(data[0].Count)=='number'),verticalColumn=countsDisplaying?'Count':'Percentage',translations=this._statistics.Translations,verticalTitle=translations[countsDisplaying?'Answered Connections Counts':'Answered Connections Percentages'],questionOption=translations['Question Option'],questionAnswer=translations['Question Answer'],verticalLegendTmpl=(countsDisplaying?'0':'0 %'),graphMax=0,majorTickSteps=0,store={},chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){this.truncateDataTextField(data,'Value',30,'OriginalValue');store=Ext.create('App.store.charts.SingleDimension',{data:data});graphMax=store.max(verticalColumn);majorTickSteps=countsDisplaying?graphMax:Math.round(graphMax/10);chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'OrangeGreenRed',height:500,axes:[{maximum:graphMax,fields:verticalColumn,title:verticalTitle,majorTickSteps:majorTickSteps,renderer:function(axis,label,layoutContext,lastLabel){return Ext.util.Format.number(layoutContext.renderer(label),verticalLegendTmpl);},},{fields:'Value',title:translations['Most Often Answered Connections'],renderer:function(axis,labelValue,layoutContext,lastLabel){return labelValue;}}],series:[{yField:verticalColumn,label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){var codeParts=[questionOption+": ",record.get('Option'),questionAnswer+": ",record.get('Answer'),verticalTitle+': '];if(countsDisplaying){codeParts[4]+=String(record.get('Count'))+' ('+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{codeParts[4]+=Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(codeParts.join("<br />"));}},renderer:function(sprite,config,stores,index){var orangeGreenRed=Ext.chart.theme.OrangeGreenRed.Colors,record=stores.store.getAt(index),recordData=record.data,correct=-1,colorIndex=0;if(typeof(recordData['Correct'])=='number'){correct=recordData['Correct'];colorIndex=correct===1?1:(correct===-1?0:2);config.fillStyle=orangeGreenRed[colorIndex];}
return config;}}]});this.$$view.addGraphHeading(translations.MostOfftenConnections);this.$$view.content.add(chart);}},_renderPersonsAnswersCountsGraph:function(){var data=this._statistics.PersonsAnswersCounts,countsDisplaying=(data.length>0&&typeof(data[0].Count)=='number'),verticalColumn=countsDisplaying?'Count':'Percentage',translations=this._statistics.Translations,verticalTitle=translations[countsDisplaying?'Answered Connections Counts':'Answered Connections Percentages'],verticalLegendTmpl=(countsDisplaying?'0':'0 %'),graphMax=0,majorTickSteps=0,store={},chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){store=Ext.create('App.store.charts.SingleDimension',{data:data});graphMax=store.max(verticalColumn);majorTickSteps=countsDisplaying?graphMax:5;chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'Blue',axes:[{maximum:graphMax,fields:verticalColumn,title:verticalTitle,majorTickSteps:majorTickSteps,renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),verticalLegendTmpl);},},{fields:'Value',title:translations['Connections Counts In Answer']}],series:[{yField:verticalColumn,label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){var code='';if(countsDisplaying){code=record.get('Value')+': '
+String(record.get('Count'))+' ('
+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{code=record.get('Value')+': '
+Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(code);}},renderer:function(sprite,config,data,index){var blueAndRedColors=Ext.chart.theme.BlueRed.Colors;return{fillStyle:blueAndRedColors[index>0?0:1]};}}]});this.$$view.addGraphHeading(translations.PersonsAnswersCounts);this.$$view.content.add(chart);}},_renderConnectionsCorrectnessGraph:function(){var data=this._statistics.ConnectionsCorrectness,min=0,max=0,diff=0,translations=this._statistics.Translations,questionOption=translations['Question Option'],questionAnswer=translations['Question Answer'],correctlyAnsweredRespondents=translations['Correctly answered respondents'],incorrectlyAnsweredRespondents=translations['Incorrectly answered respondents'],store={},chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){this.truncateDataTextField(data,'Value',30,'OriginalValue');for(var i=0,l=data.length;i<l;i+=1){data[i].Count0=data[i].Count0>0?data[i].Count0*(-1):data[i].Count0;data[i].Percentage0=data[i].Percentage0>0?data[i].Percentage0*(-1):data[i].Percentage0;}
store=Ext.create('App.store.charts.MultipleDimensions',{data:data});min=Math.round(store.min('Count0')*1.6);max=Math.round(store.max('Count1')*1.5);diff=max-min;chart=Ext.create('App.view.charts.MultiColumns',{store:store,height:700,axes:[{title:{text:translations['Number Of Correct And Incorrect Respondents'],fontSize:'11px'},minimum:min,maximum:max,majorTickSteps:Math.round(Math.sqrt(diff)),renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(Math.abs(label)),'0');}},{title:translations['Options Connections'],titleMargin:10}],series:[{label:{font:'11px Helvetica',display:'outside',renderer:function(value,markerInstance,markerConfig,stores,index){var record=stores.store.getAt(index);if(value>0){return record.data.Label1;}else if(value<0){return record.data.Label0;}else{return'0 (0 %)';}}},tooltip:{renderer:function(tooltip,record,item){tooltip.setHtml([questionOption+": ",record.get('Option'),questionAnswer+": ",record.get('Answer'),correctlyAnsweredRespondents+': '+record.get('Label1'),incorrectlyAnsweredRespondents+': '+record.get('Label0')].join("<br />"));}}}]});this.$$view.addGraphHeading(translations.ConnectionsCorrectness);this.$$view.content.add(chart);}},_renderPeopleCorrectnessGraph:function(){var rawData=this._statistics.PeopleCorrectness,countsDisplaying=Tools.TypeOf(rawData)=='Array'&&rawData.length>0&&typeof(rawData[0].Count)=='number',rawItem={},data=[],translations=this._statistics.Translations,verticalTitle=translations[countsDisplaying?'Respondents Counts':'Respondents Percentages'],valueTmpl='',min=0,max=0,diff=0,store={},chart={};if(Tools.TypeOf(rawData)=='Array'&&rawData.length>0){for(var i=0,l=rawData.length;i<l;i+=1){rawItem=rawData[i];data.push({OriginalValue:rawItem.Value,Value:this._translateCorrectAnswers(rawItem.Value),Count:rawItem.Count,Label:rawItem.Label});}
store=Ext.create('App.store.charts.SingleDimension',{data:data});max=store.max('Count');chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'Sky',axes:[{title:translations['Respondents Counts'],maximum:max,majorTickSteps:Math.round(Math.sqrt(max)),renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),'0');},},{fields:'Value',title:{text:translations['Correctly Connected Options Count'],fontSize:'12px'}}],series:[{label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},tooltip:{renderer:function(tooltip,record,item){var codeParts=[record.get('Value'),verticalTitle+': '];if(countsDisplaying){codeParts[1]+=String(record.get('Count'))+' ('+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{codeParts[1]+=Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(codeParts.join("<br />"));}},renderer:function(sprite,config,stores,index){var record=stores.store.getAt(index);var blueAndRedColors=Ext.chart.theme.BlueRed.Colors;if(record.data.OriginalValue===0){return{fillStyle:blueAndRedColors[1]};}
return config;}}]});this.$$view.addGraphHeading(translations.PeopleCorrectness);this.$$view.content.add(chart);}},_renderCorrectAnswersGraphIfAnyData:function(){var data=this._statistics.CorrectAnswers,totalPercentCnt=0,store,chart;if(Tools.TypeOf(data)=='Array'&&data.length>0){for(var i=0,l=data.length;i<l;i+=1){totalPercentCnt+=data[i].Percentage;data[i].Label=String(data[i].Value).replace(/\s/g,"\n")+': '+data[i].Label;}
if(totalPercentCnt>0){store=Ext.create('App.store.charts.SingleDimension',{data:data});chart=Ext.create('App.view.charts.Pie',{store:store,theme:'GreenRedGray'});this.$$view.addGraphHeading(this._statistics.Translations.CorrectAnswers);this.$$view.content.add(chart);}else{this.$$view.addNoDataMsg();}}},_translateCorrectAnswers:function(value){var translationsKeys=['1 right answer','{0} right answers (plural: 2-4)','{0} right answers (plural: 0,5-Infinite)'];var translations=this._statistics.Translations;if(value===1){return translations[translationsKeys[0]];}else if(value>1&&value<5){return String.format(translations[translationsKeys[1]],value);}else{return String.format(translations[translationsKeys[2]],value);}}});

/* /static/js/front/statistics/controller/tabs/Boolean.js */
Ext.define('App.controller.tabs.Boolean',{extend:'App.controller.Tab',onLaunch:function(){this.deelay(function(){if(Tools.TypeOf(this._statistics.Summary)=='Array'){this.renderSummaryIfAnyData();}else{this.$$view.addGraphHeading(this._statistics.Translations.Summary);}
this.deelay(function(){this.renderBooleanGraph(this._statistics.Overview);});});this.callParent(arguments);}});

/* /static/js/front/statistics/controller/tabs/BooleanAndText.js */
Ext.define('App.controller.tabs.BooleanAndText',{extend:'App.controller.Tab',onLaunch:function(){this.deelay(function(){if(Tools.TypeOf(this._statistics.Summary)=='Array'){this.renderSummaryIfAnyData();}else{this.$$view.addGraphHeading(this._statistics.Translations.Summary);}
this.deelay(function(){this.renderBooleanGraph(this._statistics.Overview);this.deelay(function(){this.renderTextsSummaryGraphOrGrid(this._statistics.AllTextAnswers,this._statistics.Translations.AllTextAnswers);});});});this.callParent(arguments);}});

/* /static/js/front/statistics/controller/tabs/Text.js */
Ext.define('App.controller.tabs.Text',{extend:'App.controller.Tab',requires:[],onLaunch:function(){this.deelay(function(){this.renderSummaryIfAnyData();this.deelay(function(){this.renderTextsSummaryGraphOrGrid(this._statistics.Overview,this._statistics.Translations.Overview);this.deelay(function(){if(Tools.TypeOf(this._statistics.CorrectAnswers)=='Array'){this.$$view.addGraphHeading(this._statistics.Translations.CorrectAnswers);this.renderBooleanGraph(this._statistics.CorrectAnswers);}
this.deelay(function(){this.renderInvolvedGraphIfAnyData();});});});});this.callParent(arguments);}});

/* /static/js/front/statistics/controller/tabs/Textarea.js */
Ext.define('App.controller.tabs.Textarea',{extend:'App.controller.Tab',requires:[],init:function(){this.callParent(arguments);},onLaunch:function(){this.deelay(function(){this.renderSummaryIfAnyData();this.deelay(function(){this.renderTextsSummaryGraphOrGrid(this._statistics.Overview,this._statistics.Translations.Overview);this.deelay(function(){this.renderInvolvedGraphIfAnyData();});});});this.callParent(arguments);}});

/* /static/js/front/statistics/controller/tabs/Integer.js */
Ext.define('App.controller.tabs.Integer',{extend:'App.controller.Tab',requires:[],onLaunch:function(){this.deelay(function(){this.renderSummaryIfAnyData();this.deelay(function(){this._renderOverviewGraphIfAnyData();this.deelay(function(){this._renderCorrectAnswersGraphIfAnyData();this.deelay(function(){this.renderInvolvedGraphIfAnyData();});});});});this.callParent(arguments);},_renderOverviewGraphIfAnyData:function(){var data=this._statistics.Overview,store=Ext.create('App.store.charts.SingleDimension',{data:data}),countsDisplaying=data.length>0&&typeof(data[0].Count)=='number',verticalColumn=countsDisplaying?'Count':'Percentage',translations=this._statistics.Translations,verticalTitle=translations[countsDisplaying?'Respondents Counts':'Respondents Percentages'],tooltipValueLabel=translations[countsDisplaying?'Respondents Count':'Respondents Percentage'],presentedValue=translations['Presented value'],verticalLegendTmpl=countsDisplaying?'0':'0 %',graphMaximum=store.max(verticalColumn),majorTickSteps=countsDisplaying?graphMaximum:Math.round(graphMaximum/10),chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'YellowCustom',axes:[{maximum:store.max(verticalColumn),fields:verticalColumn,title:verticalTitle,majorTickSteps:majorTickSteps,renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),verticalLegendTmpl);}},{fields:'Value',title:this._statistics.Translations['Presented values']}],series:[{yField:verticalColumn,label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){var codeParts=[presentedValue+': '+record.get('Value'),tooltipValueLabel+': '];if(countsDisplaying){codeParts[1]+=String(record.get('Count'))+' ('+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{codeParts[1]+=Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(codeParts.join("<br />"));}},renderer:function(sprite,config,data,index){var yellowAndRedColors=Ext.chart.theme.YellowRed.Colors;return{fillStyle:yellowAndRedColors[index>0?0:1]};}}]});this.$$view.addGraphHeading(this._statistics.Translations.Overview);this.$$view.content.add(chart);}else{this.$$view.addNoDataMsg();}},_renderCorrectAnswersGraphIfAnyData:function(){var data=this._statistics.CorrectAnswers,totalPercentCnt=0,store,chart;if(Tools.TypeOf(data)=='Array'&&data.length>0){for(var i=0,l=data.length;i<l;i+=1){totalPercentCnt+=data[i].Percentage;data[i].Label=String(data[i].Value).replace(/\s/g,"\n")+': '+data[i].Label;}
if(totalPercentCnt>0){store=Ext.create('App.store.charts.SingleDimension',{data:data});chart=Ext.create('App.view.charts.Pie',{store:store,theme:'GreenRedGray'});this.$$view.addGraphHeading(this._statistics.Translations.CorrectAnswers);this.$$view.content.add(chart);}else{this.$$view.addNoDataMsg();}}}});

/* /static/js/front/statistics/controller/tabs/Float.js */
Ext.define('App.controller.tabs.Float',{extend:'App.controller.tabs.Integer',requires:[],});

/* /static/js/front/statistics/controller/tabs/Radios.js */
Ext.define('App.controller.tabs.Radios',{extend:'App.controller.Tab',requires:[],onLaunch:function(){this.deelay(function(){this.renderSummaryIfAnyData();this.deelay(function(){this._renderOverviewGraphIfAnyData();this.deelay(function(){this._renderCorrectAnswersGraphIfAnyData();this.deelay(function(){this.renderInvolvedGraphIfAnyData();});});});});this.callParent(arguments);},_renderOverviewGraphIfAnyData:function(){var data=this._statistics.Overview,countsDisplaying=data.length>0&&typeof(data[0].Count)=='number',verticalColumn=countsDisplaying?'Count':'Percentage',translations=this._statistics.Translations,verticalTitle=translations[countsDisplaying?'Respondents Counts':'Respondents Percentages'],tooltipValueLabel=translations[countsDisplaying?'Respondents Count':'Respondents Percentage'],presentedValue=translations['Presented value'],verticalLegendTmpl=countsDisplaying?'0':'0 %',graphMaximum=0,majorTickSteps=0,store={},chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){this.truncateDataTextField(data,'Value',25,'OriginalValue');store=Ext.create('App.store.charts.SingleDimension',{data:data});graphMaximum=store.max(verticalColumn);majorTickSteps=countsDisplaying?graphMaximum:Math.round(graphMaximum/10);chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'YellowCustom',height:500,axes:[{maximum:store.max(verticalColumn),fields:verticalColumn,title:verticalTitle,majorTickSteps:majorTickSteps,renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),verticalLegendTmpl);}},{fields:'Value',title:this._statistics.Translations['Presented values']}],series:[{yField:verticalColumn,label:{field:'Label',renderer:function(value,labelInstance,config,stores,index){return value.replace(/\n/g,' ');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){var codeParts=[presentedValue+": ",record.get('OriginalValue'),tooltipValueLabel+': '];if(countsDisplaying){codeParts[2]+=String(record.get('Count'))+' ('+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{codeParts[2]+=Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(codeParts.join("<br />"));}},renderer:function(sprite,config,data,index){var yellowAndRedColors=Ext.chart.theme.YellowRed.Colors;return{fillStyle:yellowAndRedColors[index>0?0:1]};}}]});this.$$view.addGraphHeading(this._statistics.Translations.Overview);this.$$view.content.add(chart);}else{this.$$view.addNoDataMsg();}},_renderCorrectAnswersGraphIfAnyData:function(){var data=this._statistics.CorrectAnswers,totalPercentCnt=0,store,chart;if(Tools.TypeOf(data)=='Array'&&data.length>0){for(var i=0,l=data.length;i<l;i+=1){totalPercentCnt+=data[i].Percentage;data[i].Label=String(data[i].Value).replace(/\s/g,"\n")+': '+data[i].Label;}
if(totalPercentCnt>0){store=Ext.create('App.store.charts.SingleDimension',{data:data});chart=Ext.create('App.view.charts.Pie',{store:store,theme:'GreenRedGray'});this.$$view.addGraphHeading(this._statistics.Translations.CorrectAnswers);this.$$view.content.add(chart);}else{this.$$view.addNoDataMsg();}}}});

/* /static/js/front/statistics/controller/tabs/Checkboxes.js */
Ext.define('App.controller.tabs.Checkboxes',{extend:'App.controller.Tab',requires:[],onLaunch:function(){this.deelay(function(){this.renderSummaryIfAnyData();this.deelay(function(){this._renderOverviewGraphIfAnyData();this.deelay(function(){this._renderSelectedOptionsCountsInAnswerGraph();this.deelay(function(){this._renderAnswersCorrectnessGraph();this.deelay(function(){this._renderPeopleCorrectnessGraph();this.deelay(function(){this.renderInvolvedGraphIfAnyData();});});});});});});this.callParent(arguments);},_renderOverviewGraphIfAnyData:function(){var data=this._statistics.Overview,store=Ext.create('App.store.charts.SingleDimension',{data:data}),countsDisplaying=data.length>0&&typeof(data[0].Count)=='number',verticalColumn=countsDisplaying?'Count':'Percentage',verticalTitle=this._statistics.Translations[countsDisplaying?'Selections Counts':'Selections Percentages'],verticalLegendTmpl=countsDisplaying?'0':'0 %',graphMaximum=store.max(verticalColumn),majorTickSteps=countsDisplaying?graphMaximum:Math.round(graphMaximum/2),chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'YellowCustom',axes:[{maximum:store.max(verticalColumn),fields:verticalColumn,title:verticalTitle,majorTickSteps:majorTickSteps,renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),verticalLegendTmpl);}},{fields:'Value',title:this._statistics.Translations['Question Options']}],series:[{yField:verticalColumn,label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){var code='';if(countsDisplaying){code=record.get('Value')+': '
+String(record.get('Count'))+' ('
+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{code=record.get('Value')+': '
+Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(code);}},renderer:function(sprite,config,data,index){}}]});this.$$view.addGraphHeading(this._statistics.Translations.Overview);this.$$view.content.add(chart);}else{this.$$view.addNoDataMsg();}},_renderSelectedOptionsCountsInAnswerGraph:function(){var data=this._statistics.SelectedOptionsCountsInAnswer,countsDisplaying=(data.length>0&&typeof(data[0].Count)=='number'),verticalColumn=countsDisplaying?'Count':'Percentage',translations=this._statistics.Translations,verticalTitle=translations[countsDisplaying?'Respondents Counts':'Respondents Percentages'],verticalLegendTmpl=(countsDisplaying?'0':'0 %'),graphMax=0,majorTickSteps=0,store={},chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){store=Ext.create('App.store.charts.SingleDimension',{data:data});graphMax=store.max(verticalColumn);majorTickSteps=countsDisplaying?graphMax:Math.round(graphMax/2);chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'Blue',axes:[{maximum:graphMax,fields:verticalColumn,title:verticalTitle,majorTickSteps:majorTickSteps,renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),verticalLegendTmpl);},},{fields:'Value',title:translations['Selected Options Counts In Answer']}],series:[{yField:verticalColumn,label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){var code='';if(countsDisplaying){code=record.get('Value')+': '
+String(record.get('Count'))+' ('
+Ext.util.Format.number(record.get('Percentage'),'0.0 %')+')';}else{code=record.get('Value')+': '
+Ext.util.Format.number(record.get('Percentage'),'0.0 %');}
tooltip.setHtml(code);}},renderer:function(sprite,config,data,index){var blueAndRedColors=Ext.chart.theme.BlueRed.Colors;return{fillStyle:blueAndRedColors[index>0?0:1]};}}]});this.$$view.addGraphHeading(translations.SelectedOptionsCountsInAnswer);this.$$view.content.add(chart);}},_renderAnswersCorrectnessGraph:function(){var data=this._statistics.OptionsCorrectness,min=0,max=0,diff=0,translations=this._statistics.Translations,store={},chart={};if(Tools.TypeOf(data)=='Array'&&data.length>0){for(var i=0,l=data.length;i<l;i+=1){data[i].Count0=data[i].Count0>0?data[i].Count0*(-1):data[i].Count0;data[i].Percentage0=data[i].Percentage0>0?data[i].Percentage0*(-1):data[i].Percentage0;}
store=Ext.create('App.store.charts.MultipleDimensions',{data:data});min=store.min('Count0')-4;max=store.max('Count1')+4;diff=max-min;chart=Ext.create('App.view.charts.MultiColumns',{store:store,axes:[{title:{text:translations['Number Of Correct And Incorrect Respondents'],fontSize:'11px'},minimum:min,maximum:max,majorTickSteps:diff,renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(Math.abs(label)),'0');}},{title:translations['Question Options'],titleMargin:10}],series:[{label:{font:'11px Helvetica',display:'outside',renderer:function(value,markerInstance,markerConfig,stores,index){var record=stores.store.getAt(index);if(value>0){return record.data.Label1;}else if(value<0){return record.data.Label0;}else{return'0 (0 %)';}}},tooltip:{renderer:function(tooltip,record,item){var fieldName=item.field;var recordData=item.record.data;tooltip.setHtml([recordData.Value,translations['Correctly answered respondents']+': '+recordData.Label1,translations['Incorrectly answered respondents']+': '+recordData.Label0].join('<br />'));}}}]});this.$$view.addGraphHeading(translations.OptionsCorrectness);this.$$view.content.add(chart);}},_renderPeopleCorrectnessGraph:function(){var rawData=this._statistics.PeopleCorrectness,rawItem={},data=[],translations=this._statistics.Translations,valueTmpl='',min=0,max=0,diff=0,store={},chart={};if(Tools.TypeOf(rawData)=='Array'&&rawData.length>0){rawData=this._statistics.PeopleCorrectness;for(var i=0,l=rawData.length;i<l;i+=1){rawItem=rawData[i];data.push({Value:String.format('{0}, {1}',this._translateCorrectAndIncorectAnswers(rawItem.CorrectlyAnsweredOptions,true),this._translateCorrectAndIncorectAnswers(rawItem.IncorrectlyAnsweredOptions,false)),Count:rawItem.PersonsCount,Label:rawItem.PersonsLabel});}
store=Ext.create('App.store.charts.SingleDimension',{data:data});chart=Ext.create('App.view.charts.SingleColumns',{store:store,theme:'Sky',axes:[{title:translations['Respondents Counts'],renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),'0');},},{fields:'Value',title:{text:translations['Combination Of Correctly And Incorrectly Answered Options Counts'],fontSize:'12px'}}],series:[{label:{field:'Label',renderer:function(value,labelInstance,config,rendererDataWithStore,storeRecordIndex){return value.replace(/\n/g,' ');}},renderer:function(sprite,config,data,index){}}]});this.$$view.addGraphHeading(translations.PeopleCorrectness);this.$$view.content.add(chart);}},_translateCorrectAndIncorectAnswers:function(value,correctAnswer){var allTranslationsKeys=[['1 right answer','{0} right answers (plural: 2-4)','{0} right answers (plural: 0,5-Infinite)'],['1 wrong answer','{0} wrong answers (plural: 2-4)','{0} wrong answers (plural: 0,5-Infinite)']];var translationsKeys=correctAnswer?allTranslationsKeys[0]:allTranslationsKeys[1];var translations=this._statistics.Translations;if(value===1){return translations[translationsKeys[0]];}else if(value>1&&value<5){return String.format(translations[translationsKeys[1]],value);}else{return String.format(translations[translationsKeys[2]],value);}}});

/* /static/js/front/statistics/store/charts/SingleDimension.js */
Ext.define('App.store.charts.SingleDimension',{extend:'Ext.data.Store',fields:['Value','Percentage','Label','Count']});

/* /static/js/front/statistics/store/charts/MultipleDimensions.js */
Ext.define('App.store.charts.MultipleDimensions',{extend:'Ext.data.Store',fields:['Value','Percentage0','Count0','Label0','Percentage1','Count1','Label1']});

/* /static/js/front/statistics/view/charts/themes/BlueRed.js */
Ext.define('Ext.chart.theme.BlueRed',{extend:'Ext.chart.theme.Base',alias:'chart.theme.BlueRed',statics:{Colors:['#154097','#ff100d']},constructor:function(config){this.callParent([Ext.apply({colors:this.self.Colors},config)]);}});

/* /static/js/front/statistics/view/charts/themes/GreenRedGray.js */
Ext.define('Ext.chart.theme.GreenRedGray',{extend:'Ext.chart.theme.Base',alias:'chart.theme.GreenRedGray',statics:{Colors:['#6cb61e','#ff100d','#3c3f41']},constructor:function(config){this.callParent([Ext.apply({colors:this.self.Colors},config)]);}});

/* /static/js/front/statistics/view/charts/themes/YellowCustom.js */
Ext.define('Ext.chart.theme.YellowCustom',{extend:'Ext.chart.theme.Base',alias:'chart.theme.YellowCustom',statics:{Colors:['#ffff00']},constructor:function(config){this.callParent([Ext.apply({colors:this.self.Colors},config)]);}});

/* /static/js/front/statistics/view/charts/themes/YellowRed.js */
Ext.define('Ext.chart.theme.YellowRed',{extend:'Ext.chart.theme.Base',alias:'chart.theme.YellowRed',statics:{Colors:['#ffff00','#ff100d']},constructor:function(config){this.callParent([Ext.apply({colors:this.self.Colors},config)]);}});

/* /static/js/front/statistics/view/charts/themes/OrangeGreenRed.js */
Ext.define('Ext.chart.theme.OrangeGreenRed',{extend:'Ext.chart.theme.Base',alias:'chart.theme.OrangeGreenRed',statics:{Colors:['#ffa500','#6cb61e','#ff100d']},constructor:function(config){this.callParent([Ext.apply({colors:this.self.Colors},config)]);}});

/* /static/js/front/statistics/view/charts/Pie.js */
Ext.define('App.view.charts.Pie',{extend:'Ext.chart.PolarChart',requires:[],reference:'chart',width:'100%',height:450,innerPadding:90,border:false,theme:'Muted',interactions:['itemhighlight','rotatePie3d'],series:[{type:'pie3d',angleField:'Percentage',donut:0,distortion:0.6,thickness:50,highlight:{margin:15},label:{field:'Label',},subStyle:{bevelWidth:13,opacity:0.8}}]});

/* /static/js/front/statistics/view/charts/columns/HorizontalAxeLabelTextCfgs.js */
Class.Define('App.view.charts.columns.HorizontalAxeLabelTextCfgs',{Static:{Data:[{MaxChars:3,LabelCfg:{fontSize:'13px',textAlign:'center'},BaseCfg:{insetPadding:'25 25 25 20'}},{MaxChars:5,LabelCfg:{fontSize:'13px',rotate:{degrees:-22},rotationCenterX:-40,rotationCenterY:-30},BaseCfg:{insetPadding:'25 25 25 20'}},{MaxChars:10,LabelCfg:{fontSize:'13px',rotate:{degrees:-22},rotationCenterX:-45,rotationCenterY:-35},BaseCfg:{insetPadding:'25 25 25 20'}},{MaxChars:15,LabelCfg:{fontSize:'13px',rotate:{degrees:-32},rotationCenterX:-50,rotationCenterY:-20},BaseCfg:{insetPadding:'25 25 25 20'}},{MaxChars:20,LabelCfg:{rotate:{degrees:-38},rotationCenterX:-65,rotationCenterY:-40},BaseCfg:{insetPadding:'25 25 25 40'}},{MaxChars:25,LabelCfg:{rotate:{degrees:-45},rotationCenterX:-70,rotationCenterY:-45},BaseCfg:{insetPadding:'25 25 25 40'}},{MaxChars:30,LabelCfg:{rotate:{degrees:-57},rotationCenterX:-85,rotationCenterY:-55},BaseCfg:{insetPadding:'25 25 25 45'}},{MaxChars:35,LabelCfg:{rotate:{degrees:-62},rotationCenterX:-90,rotationCenterY:-65},BaseCfg:{insetPadding:'25 25 25 50'}},{MaxChars:Infinity,LabelCfg:{rotate:{degrees:-90},rotationCenterX:-55,rotationCenterY:-55},BaseCfg:{insetPadding:'25 25 25 15'}}]}});

/* /static/js/front/statistics/view/charts/columns/FlexibleConfiguredColumnsChart.js */
Ext.define('App.view.charts.columns.FlexibleConfiguredColumnsChart',{extend:'Ext.chart.CartesianChart',require:[],reference:'chart',width:'100%',minHeight:400,insetPadding:'25 25 25 25',innerPadding:'0 5 0 5',theme:'Muted',animation:{easing:'easeOut',duration:500},border:false,interactions:['itemhighlight'],axes:[{type:'numeric3d',position:'left',fields:['Count0','Count1'],minimum:-6,maximum:11,titleMargin:10,majorTickSteps:10,label:{textAlign:'right'},grid:{odd:{fillStyle:'rgba(255, 255, 255, 0.06)'},even:{fillStyle:'rgba(0, 0, 0, 0.05)'}},renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),'0');}},{type:'category3d',position:'bottom',fields:'Value',label:{textAlign:'right'},grid:true}],series:[{type:'bar3d',xField:'Value',yField:['Count0','Count1'],highlight:true,style:{minGapWidth:10},subStyle:{opacity:0.95},label:{field:['Count0','Count1'],display:'insideEnd',renderer:function(v){return Ext.util.Format.number(v,'0.0');}},tooltip:{trackMouse:true,},renderer:function(sprite,config,data,index){var colors=Ext.chart.theme.GreenRedGray.Colors;var fieldName=sprite._field;if(fieldName.indexOf('0')>-1){return{fillStyle:colors[1]};}else{return{fillStyle:colors[0]};}}}],constructor:function(cfg){this._customizeAxes(cfg);this._customizeSeries(cfg);this._customizeBottomHorizontalAxeLabelByStoreTextsLengths(cfg);this.callParent([cfg]);},_customizeAxes:function(cfg){var axesCustomCfg=cfg.axes,axesCfg=this.config.axes,axesCustomItem={},axeItem={};if(Tools.TypeOf(axesCustomCfg)=='Array'){for(var i=0,l=axesCfg.length;i<l;i+=1){axeItem=axesCfg[i];if(typeof(axesCustomCfg[i])!='undefined'){axesCustomItem=axesCustomCfg[i];cfg.axes[i]=Ext.merge(axeItem,axesCustomItem);}else{cfg.axes[i]=axeItem;}}}},_customizeSeries:function(cfg){var seriesCustomCfg=cfg.series,seriesCfg=this.config.series,seriesCustomItem={},serieItem={};if(Tools.TypeOf(seriesCustomCfg)=='Array'){for(var i=0,l=seriesCfg.length;i<l;i+=1){serieItem=seriesCfg[i];if(typeof(seriesCustomCfg[i])!='undefined'){seriesCustomItem=seriesCustomCfg[i];cfg.series[i]=Ext.merge(serieItem,seriesCustomItem);}else{cfg.series[i]=axeItem;}}}},_customizeBottomHorizontalAxeLabelByStoreTextsLengths:function(cfg){var biggestTextLength=0;var horizontalAxeLabelTextCfgs=App.view.charts.columns.HorizontalAxeLabelTextCfgs.Data;var horizontalAxeCfg={};var axes=cfg.axes;var axeFields=[];var textField='';var axe;for(var i=0,l=axes.length;i<l;i+=1){axe=axes[i];if(axe.position=='bottom'){axeFields=Tools.TypeOf(axe.fields)=='Array'?axe.fields:[axe.fields.toString()];textField=axeFields[0];cfg.store.each(function(record,itemIndex,itemsCount){var text=String(record.data[textField]);if(text.length>biggestTextLength)biggestTextLength=text.length;});biggestTextLength-=1;for(var j=0,k=horizontalAxeLabelTextCfgs.length;j<k;j+=1){horizontalAxeCfg=horizontalAxeLabelTextCfgs[j];if(biggestTextLength<horizontalAxeCfg.MaxChars){break;}}
axe.label=Ext.merge(axe.label,horizontalAxeCfg.LabelCfg);for(var key in horizontalAxeCfg.BaseCfg){cfg[key]=horizontalAxeCfg.BaseCfg[key];}
break;}}}});

/* /static/js/front/statistics/view/charts/SingleColumns.js */
Ext.define('App.view.charts.SingleColumns',{extend:'App.view.charts.columns.FlexibleConfiguredColumnsChart',axes:[{type:'numeric3d',position:'left',fields:'Count',maximum:100,titleMargin:10,majorTickSteps:10,label:{textAlign:'right'},grid:{odd:{fillStyle:'rgba(255, 255, 255, 0.06)'},even:{fillStyle:'rgba(0, 0, 0, 0.05)'}},renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),'0');}},{type:'category3d',position:'bottom',fields:'Value',label:{textAlign:'right'},grid:true}],series:[{type:'bar3d',xField:'Value',yField:'Count',highlight:true,style:{minGapWidth:10},subStyle:{opacity:0.95},label:{field:'Count',display:'insideEnd',renderer:function(v){return Ext.util.Format.number(v,'0.0');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){tooltip.setHtml(record.get('Value')+': '+Ext.util.Format.number(record.get('Percentage'),'0.0 %'));}}}]});

/* /static/js/front/statistics/view/charts/MultiColumns.js */
Ext.define('App.view.charts.MultiColumns',{extend:'App.view.charts.columns.FlexibleConfiguredColumnsChart',axes:[{type:'numeric3d',position:'left',fields:['Count0','Count1'],minimum:-100,maximum:100,titleMargin:10,majorTickSteps:10,label:{textAlign:'right'},grid:{odd:{fillStyle:'rgba(255, 255, 255, 0.06)'},even:{fillStyle:'rgba(0, 0, 0, 0.05)'}},renderer:function(axis,label,layoutContext){return Ext.util.Format.number(layoutContext.renderer(label),'0');}},{type:'category3d',position:'bottom',fields:'Value',label:{textAlign:'right'},grid:true}],series:[{type:'bar3d',xField:'Value',yField:['Count0','Count1'],highlight:true,style:{minGapWidth:10},subStyle:{opacity:0.95},label:{field:['Count0','Count1'],display:'insideEnd',renderer:function(v){return Ext.util.Format.number(v,'0.0');}},tooltip:{trackMouse:true,renderer:function(tooltip,record,item){tooltip.setHtml(record.get('Value')+': '+
record.get('Count0')+' '+record.get('Count1'));}},renderer:function(sprite,config,data,index){var colors=Ext.chart.theme.GreenRedGray.Colors;var fieldName=sprite._field;if(fieldName.indexOf('0')>-1){return{fillStyle:colors[1]};}else{return{fillStyle:colors[0]};}}}]});

/* /static/js/front/statistics/view/tabs/Content.js */
Ext.define('App.view.tabs.Content',{extend:'Ext.panel.Panel',require:[],layout:'fit',cls:'question-statistics-tab',border:false,_question:{},_statistics:{},content:null,constructor:function(config){this._question=config.question;this._statistics=config.statistics;this.callParent(arguments);},initComponent:function(){this.content=Ext.create('Ext.container.Container',{layout:{type:'vbox',pack:'start',align:'stretch'}});this.header={cls:'question-statistics-tab-header',title:String.format("{0} <i>({1})</i>",String.format(t('{0}. Question'),this._question.Id+1),this._question.Required?t("required"):t("not required")),padding:15};this.items=[{xtype:'container',cls:'question-statistics-tab-content',layount:'fit',items:[{xtype:'container',html:[String.format('<h3>{0}</h3>',this._question.Text),'<div class="hr"></div>'].join('')},this.content]}];this.callParent(arguments);},addGraphHeading:function(headingText){this.content.add({xtype:'container',html:String.format('<h4>{0}</h4>',headingText)});},completeSummaryTableCode:function(summaryData){var tableTmpl='<table class="summary"><tbody>{0}</tbody></table>';var rowTmpl='<tr><td class="label">{0}</td><th class="count">{1}</th><td class="percentage">{2}</td></tr>';var rows=[];for(var i=0,l=summaryData.length;i<l;i+=1){rows.push(String.format(rowTmpl,summaryData[i][0],summaryData[i][1],typeof(summaryData[i][2])!='undefined'?summaryData[i][2]+' %':''));}
return String.format(tableTmpl,rows.join(''));},addNoDataMsg:function(){this.content.add({xtype:'container',html:String.format('<div class="no-graph-data-msg">{0}</div>',String(t('No graph data msg')).replace("\n",'<br />'))});}});

/* /static/js/front/statistics/view/Tab.js */
Ext.define('App.view.Tab',{extend:'Ext.container.Container',requires:[],border:false,layout:'fit',statics:{questionTypesIcons:{'boolean':'fa-toggle-off','boolean-and-text':'fa-toggle-on','text':'fa-comment','textarea':'fa-file-text','integer':'fa-sort-numeric-asc','float':'fa-sort-numeric-asc','radios':'fa-dot-circle-o','checkboxes':'fa-check-square-o','connections':'fa-random'}},initComponent:function(){var question=this.initialConfig.question,questionNumber=this.initialConfig.index+1,questionsCount=this.initialConfig.questionsCount,title=t('{0}. Question'),totalCiphers=questionsCount.toString().length,currentCiphers=questionNumber.toString().length,titlePreSpace='';for(var i=0,l=totalCiphers-currentCiphers;i<l;i+=1){titlePreSpace+='&nbsp;&nbsp;';}
this.title=String.format(title,titlePreSpace+questionNumber);this.iconCls='question-statistics-tab-title-icon fa '+this.self.questionTypesIcons[question.Type];this.callParent();}});

/* /static/js/front/statistics/view/Layout.js */
Ext.define('App.view.Layout',{extend:'Ext.tab.Panel',requires:['App.view.Tab'],layout:'fit',minHeight:300,border:false,tabPosition:'left',tabRotation:0,border:false,defaults:{bodyPadding:10,scrollable:false,closable:false,border:false},initComponent:function(){var oneTabHeight=40.7,allTabsHeight=0,questions=App.libs.Config.Questions;allTabsHeight=questions.length*oneTabHeight;this.minHeight=Math.max(allTabsHeight,this.minHeight);this.callParent();}});

/* /static/js/front/statistics/app.js */
Ext.Loader.setConfig({enabled:false,disableCaching:true});Ext.application({name:'App',appProperty:'instance',autoCreateViewport:false,requires:[,'App.libs.Config','App.libs.Translator','App.libs.Helpers'],controllers:['Base'],launch:function(){var config=App.libs.Config;if(config.Init()){App.instance.appFolder=config.BasePath+'static/js/front/statistics';App.libs.Translator.Translations=config.Translations;}}});

/* /Var/Tmp/mvccore-form.js */
window.MvcCoreForm=function(){function f(a,b){this.f=a;this.Fields=b||[];f.SetInstance(a.id,this);this.Init()}f.aa=/MSIE [6-8]/g.test(navigator.userAgent);f.P={};f.CreateInstance=function(a,b){b=new f(a,b);return f.SetInstance(a.id,b)};f.GetInstance=function(a){return f.P[a]};f.SetInstance=function(a,b){return f.P[a]=b};f.prototype={K:f.aa,Init:function(){var a=this;this.g(this.Fields,function(b,d){if("Init"in d)try{d.Init(a)}catch(c){console?console.log(c,c.stack):alert(c.message)}});this.f.onsubmit=function(b){a.OnSubmit(b)}},OnSubmit:function(a){a=a||window.event;var b=this.f,d=!0,c=[];this.g(this.Fields,function(a,g){var e=g.name;a=[];e="undefined"!=typeof b[e]?b[e].value:"";if("Validate"in g){try{a=g.Validate(e)}catch(h){a=[h.message]}0<a.length&&(d=!1,c.push(a.join(String.fromCharCode(10))))}});if(!d)return alert(c.join(String.fromCharCode(10))),a.preventDefault(),!1},i:function(a,b,d,c){function e(a){a=a||window.event;var b=!1;a.preventDefault||(a.preventDefault=function(){b=!0});d(a);if(b)return!1}this.K?a.attachEvent("on"+b,e):a.addEventListener(b,e,!!c)},X:function(a){return document.createElement(a)},W:function(a,b){return this.K?a.insertAdjacentElement("beforeEnd",b):a.appendChild(b)},Y:function(a,b){return-1<String(" "+a.className+" ").indexOf(b)},A:function(a,b){a.className+=" "+b},L:function(a,b){b=" "+b+" ";for(var d=new RegExp(b,"g"),c=String(" "+a.className+" ");-1<c.indexOf(b);)c=c.replace(d," ");a.className=c.replace(/\s+/g," ")},J:function(a,b){return a.getAttribute(b)},C:function(a,b,d){return a.setAttribute(b,d)},B:function(a,b){return a.removeAttribute(b)},g:function(a,b){for(var d=0,c=a.length;d<c&&!1!==b(d,a[d],a);d+=1);}};return f}();

/* /Var/Tmp/range.js */
(function(f){f.Range=function(a){this.a=null;this.Name=a};f.Range.prototype={la:"% - %",T:null,U:null,o:null,w:null,Init:function(a){this.a=a;this.T=a.f[this.Name];this.oa();this.va();this.na()},oa:function(){var a=this.T,b=this.a,d=b.W,c=b.X,e=b.A,g=b.J,f=b.C,h=b.B;b=[];var k=c("div");c=c("span");var l=a.cloneNode();e(a,"range-multiple");var m=g(a,"data-value");m.length?b=m.split(","):b=[g(a,"min")||"0",g(a,"max")||"100"];h(l,"multiple");h(l,"id");f(l,"value",b[0]);g=l.name;l.name=-1<g.indexOf("[]")?g:g+"[]";g=l.cloneNode();f(g,"value",b[1]);e(l,"first");e(g,"second");f(k,"id",a.id);k.className=a.className;c=d(k,c);l=d(k,l);g=d(k,g);a.parentNode.replaceChild(k,a);this.o=l;this.w=g;this.U=c},va:function(){var a=this.o,b=this.w;"stepDown"in a||(a.stepDown=function(b){a.value-=b});"stepUp"in b||(b.stepUp=function(a){b.value+=a})},na:function(){var a=this,b=a.o,d=a.w,c=a.Z,e=a.ka,f=e(b),n=e(d);a.R(b,function(){for(var e=0,g=c(b.value)+f;g>c(d.value)&&!(d.stepUp(),e+=1,100<e););a.I()});a.R(d,function(){for(var e=0,f=c(d.value)-n;f<c(b.value)&&!(b.stepDown(),e+=1,100<e););a.I()});a.I()},R:function(a,b){this.a.i(a,this.a.za?"change":"input",b)},I:function(){this.U.innerHTML=this.la.replace("%",this.o.value).replace("%",this.w.value)},Z:function(a){return parseInt(a,10)},ka:function(a){var b=a.step.toString(),d=1;0<b.length?d=parseInt(b,10):(a=a.value.toString(),0<a.length&&(b=a.lastIndexOf("."),-1<b&&(a=a.substr(b+1),0<a.length&&(d=parseInt(a,10)/10))));return d}}})(window.MvcCoreForm);
